"use strict";(self.webpackChunkng_weather=self.webpackChunkng_weather||[]).push([[129],{7129:(F,d,c)=>{c.r(d),c.d(d,{MainPageModule:()=>U,routesMainPage:()=>_});var r=c(6814),u=c(6988),t=c(2679),f=c(8152),h=c(9352),b=c(8986),m=c(4056);let C=(()=>{class n{constructor(){this.active=!1,this.onTabSelected=new t.vpe,this.onTabClosed=new t.vpe}onTabClicked(){this.title&&this.onTabSelected.emit(this.title)}onCloseClicked(){this.title&&this.onTabClosed.emit(this.title)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-tab"]],inputs:{title:"title"},outputs:{onTabSelected:"onTabSelected",onTabClosed:"onTabClosed"},decls:5,vars:4,consts:[[1,"app-tab",3,"click"],[1,"close",3,"click"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return i.onTabClicked()}),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"span",1),t.NdJ("click",function(){return i.onCloseClicked()}),t._uU(4,"\xd7"),t.qZA()()),2&o&&(t.ekj("selected",i.active),t.xp6(2),t.AsE("",i.title.title," (",null==i.title?null:i.title.subtitle,")"))},styles:[".app-tab[_ngcontent-%COMP%]{padding:10px 40px 10px 20px;cursor:pointer;background-color:#cacaca;border-radius:20px;transition:background-color .3s ease;position:relative}.app-tab[_ngcontent-%COMP%]:hover{background-color:#d0d0d0}.app-tab[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;padding:10px;cursor:pointer}.app-tab.selected[_ngcontent-%COMP%]{background-color:#bdcacf}"]})}return n})();function T(n,s){if(1&n){const e=t.EpF();t.TgZ(0,"app-tab",4),t.NdJ("onTabSelected",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.selectTab(i))})("onTabClosed",function(i){t.CHM(e);const a=t.oxw(2);return t.KtG(a.onCloseClicked(i))}),t.qZA()}2&n&&t.Q6J("title",s.$implicit)}function g(n,s){if(1&n&&(t.TgZ(0,"div",1,2),t.YNc(2,T,1,1,"app-tab",3),t.qZA()),2&n){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.titles)}}let v=(()=>{class n{constructor(e){this.cdr=e,this.onTabClosed=new t.vpe,this.onTabSelected=new t.vpe}onCloseClicked(e){this.onTabClosed.emit(e)}selectTab(e){this.onTabSelected.emit(e);const o=this.tabs.find(i=>i.title.title===e.title);o&&this.setTabActive(o)}ngAfterViewInit(){0===this.tabs.filter(o=>o.active).length&&this.setTabActive(this.tabs.first)}setTabActive(e){this.tabs.toArray().forEach(o=>o.active=!1),e.active=!0,this.cdr.detectChanges()}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-tab-container"]],viewQuery:function(o,i){if(1&o&&t.Gf(C,5),2&o){let a;t.iGM(a=t.CRH())&&(i.tabs=a)}},inputs:{titles:"titles"},outputs:{onTabClosed:"onTabClosed",onTabSelected:"onTabSelected"},decls:1,vars:1,consts:[["class","app-tab-container",4,"ngIf"],[1,"app-tab-container"],["tab",""],[3,"title","onTabSelected","onTabClosed",4,"ngFor","ngForOf"],[3,"title","onTabSelected","onTabClosed"]],template:function(o,i){1&o&&t.YNc(0,g,3,1,"div",0),2&o&&t.Q6J("ngIf",i.titles)},dependencies:[r.sg,r.O5,C],styles:[".app-tab-container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center;background-color:#f0f0f0;border-bottom:1px solid #ccc;padding:10px;overflow-x:auto}.app-tab-container[_ngcontent-%COMP%]     .app-tab{margin-right:5px}"]})}return n})();const x=n=>["./forecast",n];function w(n,s){if(1&n&&(t.TgZ(0,"div")(1,"div",1)(2,"div")(3,"h3"),t._uU(4),t.qZA(),t.TgZ(5,"h4"),t._uU(6),t.qZA(),t.TgZ(7,"h4"),t._uU(8,"Temperatures today:"),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"number"),t.ALo(12,"number"),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"p")(15,"a",2),t._uU(16),t.qZA()()(),t.TgZ(17,"div"),t._UZ(18,"img",3),t.qZA()()()),2&n){const e=t.oxw();t.xp6(4),t.AsE("",e.location.data.name," (",e.location.zip,")"),t.xp6(2),t.hij("Current conditions: ",e.location.data.weather[0].main,""),t.xp6(4),t.lnq(" Current ",t.xi3(11,9,e.location.data.main.temp,".0-0")," - Max ",t.xi3(12,12,e.location.data.main.temp_max,".0-0")," - Min ",t.xi3(13,15,e.location.data.main.temp_min,".0-0")," "),t.xp6(5),t.Q6J("routerLink",t.VKq(18,x,e.location.zip)),t.xp6(1),t.hij("Show 5-day forecast for ",e.location.data.name,""),t.xp6(2),t.Q6J("src",e.weatherIcon,t.LSH)}}let y=(()=>{class n{ngOnInit(){console.log(this.location)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-conditions"]],inputs:{location:"location",weatherIcon:"weatherIcon"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"well","flex"],[3,"routerLink"],[3,"src"]],template:function(o,i){1&o&&t.YNc(0,w,19,20,"div",0),2&o&&t.Q6J("ngIf",i.location)},dependencies:[r.O5,u.rH,r.JJ],styles:[".close[_ngcontent-%COMP%]{cursor:pointer}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]})}return n})();function Z(n,s){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"app-tab-container",2),t.NdJ("onTabClosed",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.removeLocation(i))})("onTabSelected",function(i){t.CHM(e);const a=t.oxw();return t.KtG(a.selectTab(i))}),t.qZA(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("titles",e.tabsTitles)}}function A(n,s){1&n&&t.GkF(0)}const I=n=>({$implicit:n});function S(n,s){if(1&n&&(t.ynx(0),t.YNc(1,A,1,0,"ng-container",3),t.BQk()),2&n){const e=t.oxw(),o=t.MAs(3);t.xp6(1),t.Q6J("ngTemplateOutlet",o)("ngTemplateOutletContext",t.VKq(2,I,e.selectedLocation))}}function k(n,s){if(1&n&&t._UZ(0,"app-current-conditions",4),2&n){const e=s.$implicit,o=t.oxw();t.Q6J("location",e)("weatherIcon",o.weatherIcon)}}let J=(()=>{class n{constructor(e,o){this.weatherService=e,this.locationService=o,this.currentConditions$=this.weatherService.currentConditions$,this.locations=[],this._onDestroy=new f.xQ}ngOnInit(){this.takeCurrentConditions()}takeCurrentConditions(){this.currentConditions$.pipe((0,h.R)(this._onDestroy)).subscribe(e=>{this.locations=e,this.tabsTitles=this.makeTabsTitles(this.locations),this.selectedLocation||(this.selectedLocation=e[0],this.selectedLocation&&this.getWeatherIcon(this.selectedLocation))})}makeTabsTitles(e){return e.map(o=>({title:o?.data?.name,subtitle:o.zip}))}selectTab(e){const o=e.subtitle,i=this.locations.find(a=>a.zip===o);i&&(this.selectedLocation=i,this.getWeatherIcon(i))}getWeatherIcon(e){e.data.weather[0].id&&(this.weatherIcon=this.weatherService.getWeatherIcon(e.data.weather[0].id))}removeLocation(e){if(e.subtitle){const o=e.subtitle;this.locationService.removeLocation(o),0===this.locations.length?this.selectedLocation=null:this.selectedLocation.zip===o&&(this.selectedLocation=this.locations[0],this.selectedLocation&&this.getWeatherIcon(this.selectedLocation))}}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(b.F),t.Y36(m.a))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-current-conditions-container"]],decls:4,vars:2,consts:[[4,"ngIf"],["currentConditionsTemplate",""],[3,"titles","onTabClosed","onTabSelected"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"location","weatherIcon"]],template:function(o,i){1&o&&t.YNc(0,Z,2,1,"ng-container",0)(1,S,2,4,"ng-container",0)(2,k,1,2,"ng-template",null,1,t.W1O),2&o&&(t.Q6J("ngIf",i.locations),t.xp6(1),t.Q6J("ngIf",i.selectedLocation))},dependencies:[r.O5,r.tP,v,y]})}return n})();var l=c(6223);function M(n,s){1&n&&(t.TgZ(0,"div"),t._uU(1," Please enter a valid US postal code.\n"),t.qZA())}let O=(()=>{class n{constructor(e){this.service=e,this.form=new l.cw({postalCode:new l.NI("",[n=>n.value&&!/^\d{5}(-\d{4})?$/.test(n.value)?{usPostalCodeInvalid:!0}:null])})}addLocation(e){this.service.addLocation(e)}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(m.a))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-zipcode-entry"]],decls:9,vars:3,consts:[[3,"formGroup"],[1,"well"],["type","text","formControlName","postalCode","placeholder","Zipcode",1,"form-control"],[1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"]],template:function(o,i){if(1&o&&(t.TgZ(0,"form",0)(1,"div",1)(2,"h2"),t._uU(3,"Enter a zipcode:"),t.qZA(),t._UZ(4,"input",2)(5,"br"),t.TgZ(6,"button",3),t.NdJ("click",function(){let p;return i.addLocation(null==(p=i.form.get("postalCode"))?null:p.value)}),t._uU(7," Add location "),t.qZA()()(),t.YNc(8,M,2,0,"div",4)),2&o){let a,p;t.Q6J("formGroup",i.form),t.xp6(6),t.Q6J("disabled",(null==(a=i.form.get("postalCode"))||null==a.errors?null:a.errors.usPostalCodeInvalid)||""==(null==(a=i.form.get("postalCode"))?null:a.value)),t.xp6(2),t.Q6J("ngIf",null==(p=i.form.get("postalCode"))||null==p.errors?null:p.errors.usPostalCodeInvalid)}},dependencies:[r.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u],encapsulation:2})}return n})(),P=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-main-page"]],decls:3,vars:0,consts:[[1,"container-fluid"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-zipcode-entry")(2,"app-current-conditions-container"),t.qZA())},dependencies:[J,O],encapsulation:2})}return n})(),Q=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[r.ez]})}return n})();const _=[{path:"",component:P}];let U=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[r.ez,u.Bz.forChild(_),l.UX,Q]})}return n})()}}]);