"use strict";(self.webpackChunkng_weather=self.webpackChunkng_weather||[]).push([[129],{7129:(L,d,s)=>{s.r(d),s.d(d,{MainPageModule:()=>U,routesMainPage:()=>h});var p=s(6814),m=s(6988),t=s(2679),b=s(8152),f=s(9352),T=s(8986),C=s(4056);let _=(()=>{class e{constructor(){this.active=!1,this.onTabSelected=new t.vpe,this.onTabClosed=new t.vpe}onTabClicked(){this.title&&this.onTabSelected.emit(this.title)}onCloseClicked(){this.title&&this.onTabClosed.emit(this.title)}static#t=this.\u0275fac=function(n){return new(n||e)};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-tab"]],inputs:{title:"title"},outputs:{onTabSelected:"onTabSelected",onTabClosed:"onTabClosed"},decls:5,vars:4,consts:[[1,"app-tab",3,"click"],[1,"close",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t.NdJ("click",function(){return o.onTabClicked()}),t.TgZ(1,"span"),t._uU(2),t.qZA(),t.TgZ(3,"span",1),t.NdJ("click",function(){return o.onCloseClicked()}),t._uU(4,"\xd7"),t.qZA()()),2&n&&(t.ekj("selected",o.active),t.xp6(2),t.AsE("",o.title.title," (",null==o.title?null:o.title.subtitle,")"))},styles:[".app-tab[_ngcontent-%COMP%]{padding:10px 40px 10px 20px;cursor:pointer;background-color:#cacaca;border-radius:20px;transition:background-color .3s ease;position:relative}.app-tab[_ngcontent-%COMP%]:hover{background-color:#d0d0d0}.app-tab[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{position:absolute;top:0;padding:10px;cursor:pointer}.app-tab.selected[_ngcontent-%COMP%]{background-color:#bdcacf}"]})}return e})();function g(e,l){if(1&e){const i=t.EpF();t.ynx(0),t.TgZ(1,"app-tab",3),t.NdJ("onTabSelected",function(){const o=t.CHM(i),a=o.$implicit,c=o.index,u=t.oxw(2);return t.KtG(u.selectTab(a,c))})("onTabClosed",function(){const o=t.CHM(i),a=o.$implicit,c=o.index,u=t.oxw(2);return t.KtG(u.onCloseClicked(a,c))}),t.qZA(),t.BQk()}if(2&e){const i=l.$implicit;t.xp6(1),t.Q6J("title",i)}}function v(e,l){if(1&e&&(t.TgZ(0,"div",2),t.YNc(1,g,2,1,"ng-container",1),t.qZA()),2&e){const i=t.oxw();t.xp6(1),t.Q6J("ngForOf",i.titles)}}function y(e,l){1&e&&t.GkF(0)}function w(e,l){if(1&e&&(t.ynx(0),t.YNc(1,y,1,0,"ng-container",4),t.BQk()),2&e){const i=l.$implicit,n=t.oxw();t.xp6(1),t.Q6J("ngTemplateOutlet",i)("ngTemplateOutletContext",n.tabContexts[n.selectedTabIndex])}}let Z=(()=>{class e{constructor(i){this.cdr=i,this.onTabClosed=new t.vpe,this.selectedTabIndex=0}ngAfterViewInit(){0===this.tabs.filter(n=>n.active).length&&this.setTabActive(this.tabs.first)}onCloseClicked(i,n){this.onTabClosed.emit(n),this.selectTab(i,0)}selectTab(i,n){const o=this.tabs.find(a=>a.title.title===i.title);o&&this.setTabActive(o),this.selectedTabIndex=n}setTabActive(i){this.tabs.toArray().forEach(n=>n.active=!1),i.active=!0,this.cdr.detectChanges()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(t.sBO))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-tab-container"]],viewQuery:function(n,o){if(1&n&&t.Gf(_,5),2&n){let a;t.iGM(a=t.CRH())&&(o.tabs=a)}},inputs:{titles:"titles",contentTemplates:"contentTemplates",tabContexts:"tabContexts"},outputs:{onTabClosed:"onTabClosed"},decls:2,vars:2,consts:[["class","app-tab-container",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"app-tab-container"],[3,"title","onTabSelected","onTabClosed"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(n,o){1&n&&t.YNc(0,v,2,1,"div",0)(1,w,2,2,"ng-container",1),2&n&&(t.Q6J("ngIf",o.titles),t.xp6(1),t.Q6J("ngForOf",o.contentTemplates))},dependencies:[p.sg,p.O5,p.tP,_],styles:[".app-tab-container[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center;background-color:#f0f0f0;border-bottom:1px solid #ccc;padding:10px;overflow-x:auto}.app-tab-container[_ngcontent-%COMP%]     .app-tab{margin-right:5px}"]})}return e})();const x=e=>["./forecast",e];let A=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-current-conditions"]],inputs:{location:"location",weatherIcon:"weatherIcon"},decls:19,vars:20,consts:[[1,"well","flex"],[3,"routerLink"],[3,"src"]],template:function(n,o){1&n&&(t.TgZ(0,"div")(1,"div",0)(2,"div")(3,"h3"),t._uU(4),t.qZA(),t.TgZ(5,"h4"),t._uU(6),t.qZA(),t.TgZ(7,"h4"),t._uU(8,"Temperatures today:"),t.qZA(),t.TgZ(9,"p"),t._uU(10),t.ALo(11,"number"),t.ALo(12,"number"),t.ALo(13,"number"),t.qZA(),t.TgZ(14,"p")(15,"a",1),t._uU(16),t.qZA()()(),t.TgZ(17,"div"),t._UZ(18,"img",2),t.qZA()()()),2&n&&(t.xp6(4),t.AsE("",null==o.location||null==o.location.data?null:o.location.data.name," (",null==o.location?null:o.location.zip,")"),t.xp6(2),t.hij("Current conditions: ",null==o.location||null==o.location.data?null:o.location.data.weather[0].main,""),t.xp6(4),t.lnq(" Current ",t.xi3(11,9,null==o.location||null==o.location.data||null==o.location.data.main?null:o.location.data.main.temp,".0-0")," - Max ",t.xi3(12,12,null==o.location||null==o.location.data||null==o.location.data.main?null:o.location.data.main.temp_max,".0-0")," - Min ",t.xi3(13,15,null==o.location||null==o.location.data||null==o.location.data.main?null:o.location.data.main.temp_min,".0-0")," "),t.xp6(5),t.Q6J("routerLink",t.VKq(18,x,null==o.location?null:o.location.zip)),t.xp6(1),t.hij("Show 5-day forecast for ",null==o.location||null==o.location.data?null:o.location.data.name,""),t.xp6(2),t.Q6J("src",o.weatherIcon,t.LSH))},dependencies:[m.rH,p.JJ],styles:[".close[_ngcontent-%COMP%]{cursor:pointer}.flex[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]})}return e})();const k=["tabContentTemplate"];function I(e,l){if(1&e){const i=t.EpF();t.ynx(0),t.TgZ(1,"app-tab-container",2),t.NdJ("onTabClosed",function(o){t.CHM(i);const a=t.oxw();return t.KtG(a.removeLocation(o))}),t.qZA(),t.BQk()}if(2&e){const i=t.oxw();t.xp6(1),t.Q6J("titles",i.tabsTitles)("contentTemplates",i.tabContentTemplates)("tabContexts",i.tabContexts)}}function J(e,l){if(1&e&&t._UZ(0,"app-current-conditions",3),2&e){const n=l.weatherIcon;t.Q6J("location",l.$implicit)("weatherIcon",n)}}let M=(()=>{class e{constructor(i,n,o){this.weatherService=i,this.locationService=n,this.cdr=o,this.tabContentTemplates=[],this.currentConditions$=this.weatherService.currentConditions$,this.locations=[],this._onDestroy=new b.xQ,this.tabContexts=[]}ngOnInit(){this.takeCurrentConditions()}ngAfterViewInit(){this.tabContentTemplates=this.tabContentTemplatesQueryList.toArray(),this.cdr.detectChanges()}takeCurrentConditions(){this.currentConditions$.pipe((0,f.R)(this._onDestroy)).subscribe(i=>{this.locations=i,this.tabsTitles=this.makeTabsTitles(this.locations),this.tabContexts=this.locations.map(n=>({$implicit:n,weatherIcon:this.setWeatherIcon(n.data.weather[0].id)}))})}setWeatherIcon(i){return i?this.weatherIcon=this.weatherService.getWeatherIcon(i):""}makeTabsTitles(i){return i.map(n=>({title:n?.data?.name,subtitle:n.zip}))}removeLocation(i){let n;n=this.tabContexts[i].$implicit.zip??"",n&&this.locationService.removeLocation(n)}ngOnDestroy(){this._onDestroy.next(),this._onDestroy.complete()}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(T.F),t.Y36(C.a),t.Y36(t.sBO))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-current-conditions-container"]],viewQuery:function(n,o){if(1&n&&t.Gf(k,5),2&n){let a;t.iGM(a=t.CRH())&&(o.tabContentTemplatesQueryList=a)}},decls:3,vars:1,consts:[[4,"ngIf"],["tabContentTemplate",""],[3,"titles","contentTemplates","tabContexts","onTabClosed"],[3,"location","weatherIcon"]],template:function(n,o){1&n&&t.YNc(0,I,2,3,"ng-container",0)(1,J,1,2,"ng-template",null,1,t.W1O),2&n&&t.Q6J("ngIf",o.locations.length)},dependencies:[p.O5,Z,A]})}return e})();var r=s(6223);function O(e,l){1&e&&(t.TgZ(0,"div"),t._uU(1," Please enter a valid US postal code.\n"),t.qZA())}let P=(()=>{class e{constructor(i){this.service=i,this.form=new r.cw({postalCode:new r.NI("",[e=>e.value&&!/^\d{5}(-\d{4})?$/.test(e.value)?{usPostalCodeInvalid:!0}:null])})}addLocation(i){this.service.addLocation(i)}static#t=this.\u0275fac=function(n){return new(n||e)(t.Y36(C.a))};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-zipcode-entry"]],decls:9,vars:3,consts:[[3,"formGroup"],[1,"well"],["type","text","formControlName","postalCode","placeholder","Zipcode",1,"form-control"],[1,"btn","btn-primary",3,"disabled","click"],[4,"ngIf"]],template:function(n,o){if(1&n&&(t.TgZ(0,"form",0)(1,"div",1)(2,"h2"),t._uU(3,"Enter a zipcode:"),t.qZA(),t._UZ(4,"input",2)(5,"br"),t.TgZ(6,"button",3),t.NdJ("click",function(){let c;return o.addLocation(null==(c=o.form.get("postalCode"))?null:c.value)}),t._uU(7," Add location "),t.qZA()()(),t.YNc(8,O,2,0,"div",4)),2&n){let a,c;t.Q6J("formGroup",o.form),t.xp6(6),t.Q6J("disabled",(null==(a=o.form.get("postalCode"))||null==a.errors?null:a.errors.usPostalCodeInvalid)||""==(null==(a=o.form.get("postalCode"))?null:a.value)),t.xp6(2),t.Q6J("ngIf",null==(c=o.form.get("postalCode"))||null==c.errors?null:c.errors.usPostalCodeInvalid)}},dependencies:[p.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],encapsulation:2})}return e})(),S=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#n=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-main-page"]],decls:3,vars:0,consts:[[1,"container-fluid"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"app-zipcode-entry")(2,"app-current-conditions-container"),t.qZA())},dependencies:[M,P],encapsulation:2})}return e})(),F=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#n=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[p.ez]})}return e})();const h=[{path:"",component:S}];let U=(()=>{class e{static#t=this.\u0275fac=function(n){return new(n||e)};static#n=this.\u0275mod=t.oAB({type:e});static#e=this.\u0275inj=t.cJS({imports:[p.ez,m.Bz.forChild(h),r.UX,F]})}return e})()}}]);